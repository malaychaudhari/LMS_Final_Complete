<section class="h-100 p-5">
  <div class="container">
    <div
      class="row d-flex justify-content-center align-items-center bg-light shadow p-3 rounded card-registration"
    >
      <div class="col">
        <div class="card-registration my-4">
          <div class="row g-0">
            <div
              class="col-xl-6 d-none d-xl-block justify-content-center align-items-center"
              style="padding: 20px; margin: auto"
            >
              <img
                [src]="imageUrl"
                width="1280"
                height="1980"
                alt="Sample photo"
                class="img-fluid"
                style="
                  border-top-left-radius: 0.25rem;
                  border-bottom-left-radius: 0.25rem;
                "
              />
            </div>
            <form
              class="col-xl-6 registration-form"
              [formGroup]="registrationForm"
              (ngSubmit)="onSubmit()"
            >
              <!-- registration form -->
              <div class="col">
                <div class="card-body p-md-5 text-black">
                  <h1 class="mb-5 fs-1 text-uppercase text-center">Sign Up</h1>

                  <!-- role selection -->
                  <div class="row">
                    <div class="col-md-10 mb-3">
                      <div class="input-group">
                        <span class="input-group-text">
                          <span class="fa fa-book"></span>
                        </span>
                        <select
                          class="form-control"
                          id="role"
                          formControlName="role"
                        >
                          <option value="" disabled selected>
                            Select Role
                          </option>
                          <option value="2">Manager</option>
                          <option value="3">Driver</option>
                          <option value="4">Customer</option>
                        </select>
                      </div>
                      <div
                        *ngIf="
                          registrationForm.get('role').invalid &&
                          registrationForm.get('role').touched
                        "
                        class="text-danger"
                      >
                        Role is required.
                      </div>
                    </div>
                  </div>
                  <!-- name place -->
                  <div class="row">
                    <div class="col-md-10 mb-4">
                      <div class="input-group">
                        <span class="input-group-text">
                          <span class="fa fa-user"></span>
                        </span>
                        <input
                          type="text"
                          id="form3Example1m"
                          class="form-control form-control-lg"
                          placeholder="Name"
                          formControlName="name"
                        />
                      </div>
                      <div
                        *ngIf="
                          registrationForm.get('name').invalid &&
                          registrationForm.get('name').touched
                        "
                        class="text-danger"
                      >
                        <div
                          *ngIf="registrationForm.get('name').errors?.['required']"
                        >
                          Name is required.
                        </div>
                        <div
                          *ngIf="registrationForm.get('name').errors?.['pattern']"
                        >
                          Name should contain only letters and have a minimum
                          length of 2 letters.
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- email place -->
                  <div class="row">
                    <div class="col-md-10 mb-4">
                      <div class="input-group">
                        <span class="input-group-text">
                          <span class="fa fa-envelope"></span>
                        </span>
                        <input
                          type="email"
                          id="emailInput"
                          class="form-control form-control-lg"
                          placeholder="xyz@example.com"
                          formControlName="email"
                        />
                      </div>
                      <div
                        *ngIf="
                          registrationForm.get('email').invalid &&
                          registrationForm.get('email').touched
                        "
                        class="text-danger"
                      >
                        <div
                          *ngIf="registrationForm.get('email').errors?.['required']"
                        >
                          Email is required.
                        </div>
                        <div
                          *ngIf="registrationForm.get('email').errors?.['pattern']"
                        >
                          Enter Valid Email
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- phone number place -->
                  <div class="row">
                    <div class="col-md-10 mb-4">
                      <div class="input-group">
                        <span class="input-group-text">
                          <span class="fa fa-phone" id="phoneIcon"></span>
                        </span>
                        <input
                          type="number"
                          id="phoneInput"
                          class="form-control form-control-lg"
                          placeholder="Phone Number"
                          formControlName="phoneNumber"
                        />
                      </div>
                      <div
                        *ngIf="
                          registrationForm.get('phoneNumber').invalid &&
                          registrationForm.get('phoneNumber').touched
                        "
                        class="text-danger"
                      >
                        <div
                          *ngIf="registrationForm.get('phoneNumber').errors?.['required']"
                        >
                          Phone number is required.
                        </div>
                        <div
                          *ngIf="registrationForm.get('phoneNumber').errors?.['pattern']"
                        >
                          Please enter a valid Indian phone number. The phone
                          number should be 10 digits long and start with '7',
                          '8', or '9'.
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- driver license number -->
                  <div *ngIf="registrationForm.get('role').value === '3'">
                    <div class="row">
                      <div class="col-md-10 mb-4">
                        <div class="input-group">
                          <span class="input-group-text">
                            <span class="fa fa-address-card"></span>
                          </span>
                          <input
                            type="text"
                            id="driverLicenseInput"
                            class="form-control form-control-lg"
                            placeholder="Driver License"
                            formControlName="licenseNumber"
                          />
                        </div>
                        <div
                          *ngIf="
                            registrationForm.get('licenseNumber').invalid &&
                            registrationForm.get('licenseNumber').touched
                          "
                          class="text-danger"
                        >
                          <div
                            *ngIf="registrationForm.get('licenseNumber').errors?.['required']"
                          >
                            Driver License is required.
                          </div>
                          <div
                            *ngIf="registrationForm.get('licenseNumber').errors?.['pattern']"
                          >
                            Please enter a valid driver's license number in the
                            format: DL14 2011 0012345 or DL1420110012345
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- password place -->
                  <div class="row">
                    <div class="col-md-10 mb-4">
                      <div class="input-group">
                        <span class="input-group-text">
                          <span class="fa fa-lock"></span>
                        </span>
                        <input
                          type="password"
                          id="passwordInput"
                          class="form-control form-control-lg"
                          placeholder="Password"
                          formControlName="password"
                        />
                      </div>
                      <div
                        *ngIf="
                          registrationForm.get('password').invalid &&
                          registrationForm.get('password').touched
                        "
                        class="text-danger"
                      >
                        <div
                          *ngIf="registrationForm.get('password').errors?.['required']"
                        >
                          Password is required.
                        </div>
                        <div
                          *ngIf="registrationForm.get('password').errors?.['minlength']"
                        >
                          Password should contain at least 6 characters.
                        </div>
                        <div
                          *ngIf="registrationForm.get('password').errors?.['pattern']"
                        >
                          Password should contain at least one uppercase letter,
                          one lowercase letter, one number, and one special
                          character.
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- confirm password place -->
                  <div class="row">
                    <div class="col-md-10 mb-4">
                      <div class="input-group">
                        <span class="input-group-text">
                          <span class="fa fa-lock"></span>
                        </span>
                        <input
                          type="password"
                          id="confirmPasswordInput"
                          class="form-control form-control-lg"
                          placeholder="Confirm Password"
                          formControlName="confirmPassword"
                        />
                      </div>
                      <div
                        *ngIf="
                          registrationForm.get('confirmPassword').invalid &&
                          registrationForm.get('confirmPassword').touched
                        "
                        class="text-danger"
                      >
                        <div
                          *ngIf="registrationForm.get('confirmPassword').errors?.['required']"
                        >
                          Password is required.
                        </div>
                        <div
                          *ngIf="
                            registrationForm.hasError('mismatch') &&
                            registrationForm.get('confirmPassword').dirty
                          "
                        >
                          Passwords do not match.
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row mb-4">
                    <div class="col-md-8 mx-auto">
                      <div class="text-center">
                        <button
                          type="submit"
                          data-mdb-button-init
                          data-mdb-ripple-init
                          class="btn btn-primary px-4"
                          style="width: 70%"
                          [disabled]="isLoading|| !registrationForm.valid"
                        >
                        <div class=" button-with-loader" *ngIf="isLoading" >
                          <span class="loader p-5"></span>
                        </div>
                        <span *ngIf="!isLoading">Sign in</span>
                          
                        </button>
                      </div>
                    </div>
                  </div>
                  <div class="text-center">
                    <p>
                      Already have an account?
                      <a
                        routerLink="/auth/login"
                        class="text-primary link-primary"
                        >Login</a
                      >
                    </p>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .custom-shadow-dark {
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
  }
</style>
